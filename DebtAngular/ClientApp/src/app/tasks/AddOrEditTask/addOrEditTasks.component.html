<!-- <div *ngIf="task">
  <h4 *ngIf="task.id !== '00000000-0000-0000-0000-000000000000'; else elseBlock">Edit {{task.name}}</h4>
  <ng-template #elseBlock><h4>Add task {{task.name}}</h4></ng-template>
  <div class="form-inline">
    <input type="hidden" [(ngModel)]="task.id" />
    <input type="hidden" [(ngModel)]="task.userid" />
    <label for="Name">Name</label>
    <input class="form-control m-2" [(ngModel)]="task.name" />
    <label for="Sum">Sum</label>
    <input class="form-control m-2" onkeyup="changeSum()" [(ngModel)]="task.sum" />
  </div>
  <div id="divMembers">
    <h4>Members</h4>
    <button type="button" (click)="addTaskMember()" class="btn btn-primary m-1">Add Member</button>
    <button type="button" (click)="save()" class="btn btn-success m-1">Save</button>
    <table class="memberstable">
      <tr>
        <th>Name</th>
        <th>Deposit</th>
        <th>Debt</th>
      </tr>
    </table>
    <div class="form-inline" *ngFor="let item of task?.members">
      <input type="hidden" [(ngModel)]="item.id">
      <input class="form-control m-2" [(ngModel)]="item.name">
      <input class="form-control m-2" [(ngModel)]="item.deposit">
      <input class="form-control m-2" [(ngModel)]="item.debt">
      <button class="btn btn-danger" (click)="delete(item)">x</button>
    </div>
  </div>
</div> -->
<div *ngIf="task">
  <h4 *ngIf="task.id !== '00000000-0000-0000-0000-000000000000'; else elseBlock">Edit {{task.name}}</h4>
  <ng-template #elseBlock>
    <h4>Add task {{task.name}}</h4>
  </ng-template>
  <form [formGroup]="editTaskForm" (submit)="saveTask()">
    <div class="form-inline">
      <input formControlName="taskId" type="hidden" />
      <input formControlName="userId" type="hidden" />
      <div style="margin-right:10px;">
        <label for="name">Name</label>
        <input formControlName="name" class="form-control nameInput" />
        <label *ngIf="editTaskForm.get('name').touched && editTaskForm.get('name').errors?.required"
          class="text-danger">Name can't be empty.</label>
      </div>

      <div>
        <label for="sum">Sum</label>
        <input formControlName="sum" class="form-control nameInput" />
        <div *ngIf="editTaskForm.get('sum').touched && editTaskForm.get('sum').errors">
          <label *ngIf="editTaskForm.get('sum').errors?.required" class="text-danger">Sum can't be empty.</label>
          <label *ngIf="editTaskForm.get('sum').errors?.min" class="text-danger">The Sum can't be negative.</label>
          <label *ngIf="editTaskForm.get('sum').errors?.pattern" class="text-danger">Number only.</label>
        </div>
        <label *ngIf="editTaskForm.get('sum').errors?.DepositSumError" class="text-danger">Sum of deposits not equal
          Sum.</label>
        <label *ngIf="editTaskForm.get('sum').errors?.DebtSumError" class="text-danger">Sum of debt not equal
          Sum.</label>
      </div>
    </div>
    <div id="divMembers">
      <h4>Members</h4>
      <button type="button" (click)="addTaskMember()" class="btn btn-primary m-1">Add Member</button>
      <button type="submit" class="btn btn-success m-1" [disabled]="!editTaskForm.valid" >Save</button>
      <table class="memberstable">
        <tr>
          <th>Name</th>
          <th>Deposit</th>
          <th>Debt</th>
        </tr>
      </table>
      <div formArrayName="members">
        <div class="form-inline" *ngFor="let item of  taskMembers.controls; let idx = index" [formGroupName]="idx">
          <input type="hidden" formControlName="id" />
          <input formControlName="name" class="form-control m-2 " />
          <input formControlName="deposit" class="form-control m-2" />
          <input formControlName="debt" class="form-control m-2" />
          <button class="btn btn-danger" (click)="deleteMember(idx)">x</button>
        </div>
      </div>
    </div>
  </form>